<!doctype html>
<html id="html">
<head>
<meta charset="utf-8">
<title>用户注册--学生完善信息</title>
<link href="../css/base.css" rel="stylesheet" type="text/css">
<link href="../css/jquery-ui.css" rel="stylesheet" type="text/css">
<link href="../css/popBox.css" rel="stylesheet" type="text/css">
<script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="../js/jquery-ui.min.js" type="text/javascript"></script>
<script src="../js/base.js" type="text/javascript"></script>
<script src="../js/jquery.validationEngine.min.js" type="text/javascript"></script>
<script src="../js/jquery.validationEngine-zh_CN.js" type="text/javascript"></script>

<script>
$(function(){
/*学校列表 地区列表 班级列表 教研组列表鼠标hover--------------*/		
	$('.resultList li,.mySchoolBox .selectAreaBox dl dd,.gradeList dd').live('click',function(){
		$(this).addClass('ac').siblings().removeClass('ac');
	});


/*弹窗*/
$('.popBox').dialog({
	autoOpen: false,
	width:670,
	modal: true,
	resizable:false,
	close:function(){$(this).dialog("close")}
});


/*学校pop-----------------------------------------*/	
$('.mySchoolBox .okBtn').click(function(){
	alert(55555);
	$('#selectSchoolText').val($('.popBox .schoolList .ac').attr('id'));
	$(this).parents('.popBox').dialog("close");
});



/*地区选择级联*/
;(function(){
	var index=0;//层级索引
	function addItem(url,target){//地区ajax
		$.getJSON(url,function(data){
			target.show().children('dd').remove();
			for(var i=0; i<data.length; i++){
				target.append('<dd id="'+data[i].AreaID+'">'+data[i].AreaName+'</dd>');
			};
		});
	};
	function crumb(elm){//面包屑
		$(elm).parent().hide();
		$('.mySchoolBox .crumbList').show();
		$('.mySchoolBox .crumbList span').removeClass('ac');
		$('.mySchoolBox .crumbList a').before('<span class="ac">'+elm.text()+'</span>');
	};
	
	$('.creatNewSchool').click(function(){//创建新学校
		$(this).hide();
		$('.schoolList,.mySchoolBox dl').hide();
		$('.newSchool').show();
		$('.mySchoolBox h5').text('创建新学校');
		
	})
	
	$('#selectSchoolText').click(function(){//弹框
		alert('请先选择学段');
		 $( ".mySchoolBox" ).dialog( "open" );
		 $('#searchText').placeholder({value:'请输入学校名称',ie6Top:10});
		 addItem('http://127.0.0.1:8033/ajax/GetJsonProvinceList?jsoncallback=?',$('.mySchoolBox .stateList'))
	});
	$('.backTopArea').click(function(){//返回顶部
		$(this).hide();
		$('.schoolList').hide();
		$('.mySchoolBox .crumbList').hide();
		$('.mySchoolBox .crumbList span').remove();
		addItem('http://127.0.0.1:8033/ajax/GetJsonProvinceList?jsoncallback=?',$('.mySchoolBox .stateList'))
	});
	
	$('.mySchoolBox .stateList dd').live('click',function(){//选择省
		var id=$(this).attr('id');
		addItem('http://127.0.0.1:8033/ajax/GetJsonArea?id='+id+'&jsoncallback=?',$('.mySchoolBox .cityList'));
		$('.back_selectArea').show();
		crumb($(this));
		$('.mySchoolBox h5').text('选择市');
		
	});
	$('.mySchoolBox .cityList dd').live('click',function(){//选择市
		var id=$(this).attr('id');
		addItem('http://127.0.0.1:8033/ajax/GetJsonArea?id='+id+'&jsoncallback=?',$('.mySchoolBox .districtList'));
		crumb($(this));
		$('.mySchoolBox h5').text('选择区县');
		index++;
	});
	$('.mySchoolBox .districtList dd').live('click',function(){//选择区县
		if($('.mySchoolBox .crumbList span').size()<3){
			crumb($(this));
			index++;
			$('.schoolList,.creatNewSchool').show();
		};
	});
	
	$('.mySchoolBox .back_selectArea').click(function(){//返回上级地区
		$('.mySchoolBox dl,.newSchool').hide();
		$('.mySchoolBox dl:eq('+index+')').show();
		$('.mySchoolBox .crumbList span:last').remove();
		index==0? index=0:index--;
		$('.mySchoolBox .crumbList span:last').addClass('ac');
		if($('.mySchoolBox .crumbList span').size()==0) $(this).hide();
		if(index!=0) $('.schoolList').hide();
		
	});
})();



/*班级pop---------------------------------------*/
(function(){
	var target="";
	$('.sel_class_input').live('click',function(){
		alert('请先选择学校');
		target=$(this);
		$('.creat_classBox').dialog('open');
		$('.creat_classBox .okBtn').click(function(){
			target.val($('.creat_classBox .myclassList .ac').text());
			$(this).parents('.popBox').dialog("close");
		});
	});
})();


$('.gradeList dd').live('click',function(){
	$('.creat_classBox .crumbList').show().children('span').remove();
	$('.creat_classBox .crumbList a').before('<span class="ac">'+$(this).text()+'</span>');
	$('.gradeList').hide();
	$('.creat_classBox h5').text('班级列表')
	$('.creat_classBox .myclassList').show();
});

$('.creat_classBox .back_selectArea').live('click',function(){
	$('.creat_classBox .crumbList').hide().children('span').remove();
	$('.gradeList').show();
	$('.creat_classBox .myclassList').hide();
})

$('.creatNewClass').click(function(){
	$(this).hide();
	$('.gradeList,.crumbListWrap,.myclassList').hide();
	$('.myNewClass').show();
	$('.creat_classBox h5').text('创建新班级')
});

/*学号*/
$('#stu_num_input').click(function(){
	var _this=$(this);
	$('.stu_numberBox').dialog('open');
	$('.stu_numberBox .okBtn').click(function(){
		_this.val($('.stu_numberBox .stu_numberList .ac').text());
		$(this).parents('.popBox').dialog("close");
	})
})


/*关闭弹钮-----------------------------------------*/
$('.popBox .cancelBtn').click(function(){
	$(this).parents('.popBox').dialog("close");
});


})
</script>


</head>

<body class="reg reg_student_complete">
<!--头部-->
<div class="head reg_head">
	<div class="cont24">
    	<a href="#"><h1>班海网</h1></a>
        <div class="userCenter">
        	<a class="userName" href="#"><i></i>张三</a><a href="javascript:    ;" class="logOff">退出</a>
        </div>
    </div>
	
</div>
<!--头部end-->
<!--主体部分--> 
<div class="cont24">
    <div class="grid_19 push_3">
    	<h1>完善信息</h1>
        <div class="formArea">
            <form id="form_id">
                <div class="form_list">
                	<div class="row">
                        <div class="formL">
                            <label></label>
                        </div>
                        <div class="formR">
                            <p class="bg_blue_l_gray gray_d font12 attention"><i></i> 所有项目都为必填项,请按顺序认真填写</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="formL">
                            <label>学段</label>
                        </div>
                        <div class="formR">
                            <span class="selectWrap big_sel">
                           	<i></i>
                           	<em>请选择</em>
                            	<select data-validation-engine="validate[required]" data-prompt-target="new_department" data-prompt-position="inline" data-errormessage-value-missing="学段不能为空" name="UserForm[department]" id="UserForm_department">
                                    <option value="">请选择</option>
                                    <option value="20201">小学部</option>
                                    <option value="20202">初中部</option>
                                    <option value="20203">高中部</option>
                                    </select>
                                    <span id="new_department" class="errorTxt"></span>
                            </span>

                        </div>

                    </div>
                    <div class="row">
                        <div class="formL">
                            <label>选择学校</label>
                        </div>
                        <div class="formR">
                            <input id="selectSchoolText" type="text" class="text">
                            <span id="" class="errorTxt"></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="formL">
                            <label>选择班级</label>
                        </div>
                        <div class="formR">
                            <input type="text" class="text sel_class_input">
                            <span id="" class="errorTxt"></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="formL">
                            <label>班内职务</label>
                        </div>
                        <div class="formR">
                            <span class="selectWrap big_sel">
                            	<i></i>
                            	<em>无</em>
                            	<select>
                                	<option value="0">无</option>
                                    <option value="1">数学课代表</option>
                                    <option value="2">英语课代表</option>
                                    <option value="3">班长</option>
                                </select>
                                <span id="" class="errorTxt"></span>
                            </span>
                            
                        </div>
                    </div>
                    <div class="row">
                        <div class="formL">
                            <label>学号</label>
                        </div>
                        <div class="formR">
                        	<input id="stu_num_input" type="text" class="text">
                            <span id="" class="errorTxt"></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="formL">
                            <label></label>
                        </div>
                        <div class="formR submitBtnBar">
                            <button type="button" class="btn40 bg_green submitBtn">完　成</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<!--主体end-->
<!--页脚-->
<div class="cont24">
    <div class="foot font12 grid_18 push_3">
        <p>北京三海教育科技有限公司 版权所有</p>
        <p>京ICP证080367号/京ICP备08103829号 北京市公安局海淀分局备案号1101081714</p>
    </div>
</div>
<!--弹框pop----------------------------------------------------------->
<!--选择学校-->
<div class="popBox mySchoolBox" title="我所在的学校">
    <div class="subTitleBar">
        <h5>选择省</h5>
        <div class="subTitle_r">
            <input id="searchText" type="text" class="text">
            <button type="button" class="hideText searchBtn">搜索</button>
        </div>
    </div>
    <div class="popCont"> <a href="#" class="txtBtn gray_d creatNewSchool hide">创建新学校</a>
        <a href="javascript:;" class="backTopArea">返回顶级</a>
        <div class="selectArea">
            <div class="crumbListWrap">
                <div class="crumbList clearfix hide"> 
                    <!--<span>山东省</span>
                    <span>青岛市</span>
                    <span class="ac">和平区</span>--> 
                    <a class="back_selectArea"  href="javascript:;">返回上级</a> </div>
            </div>
            <dl class="clearfix stateList"></dl>
            <dl class="clearfix cityList hide"></dl>
            <dl class="clearfix districtList hide"></dl>
            <ul class="resultList schoolList clearfix hide">
                <li id="93933" title="金州区马家第一中学">金州区马家第一中学</li>
                <li id="2543" class="ac" title="北京市人民大学附属中学">北京市人民大学附属中学</li>
                <li id="533" title="北京市第四中学">北京市第四中学</li>
                <li id="7833" title="北京市人民大学附属中学">北京市人民大学附属中学</li>
                <li id="543333" title="金州区马家第一中学">金州区马家第一中学</li>
                <li id="2133" title="北京市人民大学附属中学">北京市人民大学附属中学</li>
                <li id="3333" title="北京市第四中学">北京市第四中学</li>
                <li id="0033" title="北京市人民大学附属中学">北京市人民大学附属中学</li>
            </ul>
        </div>    
        <div class="newSchool hide">
            <form>
                <div class="form_list">
                    <div class="row">
                        <div class="formL">
                            <label>学校名称</label>
                        </div>
                        <div class="formR">
                            <input type="text" class="text">
                        </div>
                    </div>
                    <div class="row">
                        <div class="formL">
                            <label>学校学制</label>
                        </div>
                        <div class="formR"> <span class="selectWrap big_sel"> <i></i> <em>选择学制</em>
                            <select>
                                <option value="">选择学制</option>
                                <option value="1">六三制</option>
                                <option value="2">五四制</option>
                                <option value="3">五三制</option>
                            </select>
                            </span> <span id="" class="errorTxt"></span> </div>
                    </div>
                    <div class="row">
                        <div class="formL">
                            <label>学部设施</label>
                        </div>
                        <div class="formR checkboxArea">
                            <input id="c01" type="checkbox" class="checkbox hide" name="xuebu" checked>
                            <label for="c01" class="">小学</label>
                            <input id="c02"  type="checkbox" class="checkbox hide" name="xuebu">
                            <label for="c02" class="">初中</label>
                            <input id="c03"  type="checkbox" class="checkbox hide" name="xuebu">
                            <label for="c03" class="">高中</label>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="popBtnArea">
        <button type="button" class="okBtn">确定</button>
        <button type="button" class="cancelBtn">取消</button>
    </div>
</div>

<!--班级-->
<div class="popBox creat_classBox hide" title="我所在的班级">
    <div class="subTitleBar">
        <h5>选择学段</h5>
    </div>
    <div class="popCont">
        <div class="crumbListWrap"> <a href="#" class="txtBtn gray_d creatNewClass">创建新班级</a>
            <div class="crumbList clearfix hide"> 
                <!--<span class="ac">三年级</span>--> 
                <a class="back_selectArea"  href="javascript:;">返回上级</a> </div>
        </div>
        <dl class="clearfix gradeList">
            <dd>一年级</dd>
            <dd>二年级</dd>
            <dd>三年级</dd>
        </dl>
        <ul class="resultList myclassList clearfix hide">
            <li id="2543" class="ac" title="北京市人民大学附属中学四年级一班">北京市人民大学附属中学四年级一班</li>
            <li id="533" title="北京市第四中学三年级三班">北京市第四中学三年级三班</li>
            <li id="7833" title="北京市人民大学附属中学一年级二班">北京市人民大学附属中学一年级二班</li>
            <li id="543333" title="金州区马家第一中学三年级一班">金州区马家第一中学三年级一班</li>
            <li id="2133" title="北京市人民大学附属中学三班">北京市人民大学附属中学三班</li>
            <li id="3333" title="北京市第四中学五年级一班">北京市第四中学五年级一班</li>
            <li id="0033" title="北京市人民大学附属中学二年级一班">北京市人民大学附属中学二年级一班</li>
        </ul>
        <div class="myNewClass hide">
            <form>
                <div class="form_list">
                    <div class="row">
                        <div class="formL">
                            <label>班级编号</label>
                        </div>
                        <div class="formR"> <span class="selectWrap big_sel w130"> <i></i> <em>请选择</em>
                            <select>
                                <option value="">请选择</option>
                                <option value="1">2012</option>
                                <option value="2">2013</option>
                                <option value="3">2014</option>
                            </select>
                            <span id="" class="errorTxt" style="left:289px"></span> </span> 年&nbsp;
                            <input type="text" class="text  w100">
                            班 <span id="" class="errorTxt"></span> </div>
                    </div>
                    <div class="row">
                        <div class="formL">
                            <label>班级别名</label>
                        </div>
                        <div class="formR">
                            <input type="text" class="text">
                            <span id="" class="errorTxt"></span> </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="popBtnArea">
        <button type="button" class="okBtn">确定</button>
        <button type="button" class="cancelBtn">取消</button>
    </div>
</div>

<!--学号-->
<div class="popBox stu_numberBox hide" title="核对学号">
    <div class="subTitleBar">
        <h5>选择学号</h5>
    </div>
    <div class="popCont">
        <ul class="resultList stu_numberList clearfix">
            <li id="2543" class="ac">345345345</li>
            <li id="2333">345345345</li>
            <li id="2243">345333354</li>
            <li id="2283">345666412</li>
            <li id="2753">344245980</li>
        </ul>
    </div>
    <div class="popBtnArea">
        <button type="button" class="okBtn">确定</button>
        <button type="button" class="cancelBtn">取消</button>
    </div>
</div>

</body>
</html>
