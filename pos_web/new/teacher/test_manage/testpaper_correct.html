<!doctype html>
<html id="html">
<head>
<meta charset="utf-8">
<title>教师--个人中心--考试管理--判卷</title>
<link href="../../css/base.css" rel="stylesheet" type="text/css">
<link href="../../css/jquery-ui.css" rel="stylesheet" type="text/css">
<link href="../../css/popBox.css" rel="stylesheet" type="text/css">
<link href="../../css/teacher.css" rel="stylesheet" type="text/css">
<script src="../../js/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="../../js/jquery-ui.min.js" type="text/javascript"></script>
<script src="../../js/base.js" type="text/javascript"></script>
<script src="../../js/jquery.validationEngine.min.js" type="text/javascript"></script>
<script src="../../js/jquery.validationEngine-zh_CN.js" type="text/javascript"></script>
<script>
$(function(){

//判卷
//$('.correctPaperSlide').testpaperSlider({img_id:window.location.hash.replace("#","")});

		imgArr=["../../images/testPaper.jpg","../../images/testPaper.jpg","../../images/testPaper.jpg","../../images/testPaper.jpg","../../images/testPaper.jpg","../../images/testPaper.jpg"]
	$('.correctPaperSlide').testpaperSlider({ClipArr:imgArr});
	

var tpArg={on:false,bg:"#fff",fontSize:14,testPaperSize:0,page:0,tipsTxt:null,simple:false}
//on:可以添加tips   tipsTxt:tips内容  simple:正确/半对/错误

$('.setBg,.setFont').click(function(){//打开弹出框
	$(this).children('div').show();
	return false;
})
$('.setBg div a').click(function(){//设定背景
	$(this).parent().hide();
	$('.setBg').css('background-color',$(this).css('background-color'));
	tpArg.bg=$(this).css('background-color');
	return false;
})
$('.setFont div a').click(function(){//设定字号
	$(this).parent().hide();
	$('.setFont').css("background-image","none").children('.tit').text($(this).text());
	tpArg.fontSize=$(this).text();
	return false;
})

$('.comment .text').placeholder({'top':"5px",'value':"评语"});

$('.correctSelect').mySelect({fn:function(){//下拉菜单
	if($('.correctSelect .title').text()=="评分"){
		$('.comment .text').width("142px");
		$('.score').show();
		$('.score .text').placeholder({'top':"5px",'value':"分数"});
	}
	if($('.correctSelect .title').text()=="点拨"){
		$('.comment .text').width("300px")
		$('.score').hide();
	}
}});



$('.slideControlPanel .ok').click(function(){
	var mix_score=60;
	var max_score=80;
	var input_score=$('.score .text').val();
	var input_comment=$('.comment .text').val();
	if(input_comment==""){
		$('.comment .text').focus().val('');
			popBox.errorBox('请输入评语!');
			return false;
	};
	if(input_score!=""){
		if(input_score>=60 && input_score<=80 && !isNaN(input_score)){
		tpArg.tipsTxt='<span class="scoreTxt">'+$('.comment .text').val()+'</span><br><strong class="scoreVal">'+$('.score .text').val()+'</strong>分';
		}
		else{
			$('.score .text').focus().val('');
			popBox.errorBox('请输入 最低分——最高分 之间的数字!')
		}
	}
	else{
		tpArg.tipsTxt='<span class="scoreTxt">'+$('.comment .text').val()+'</span><br><strong class="scoreVal"></strong>';
	}
	tpArg.on=true;
});

$('.slideControlPanel .correct').click(function(){
	tpArg.tipsTxt='<span class="correct"></span>';
	tpArg.on=true;
	tpArg.simple=true;
});

$('.slideControlPanel .problem').click(function(){
	tpArg.tipsTxt='<span class="problem"></span>';
	tpArg.on=true;
	tpArg.simple=true;

});

$('.slideControlPanel .wrong').click(function(){
	tpArg.tipsTxt='<span class="wrong"></span>';
	tpArg.on=true;
	tpArg.simple=true;
});





//添加tips
$('.testPaperSlideList li').click(function(ev){
	var tipLeft=ev.clientX-$(this).offset().left+$(document).scrollLeft();
	var tipTop=ev.clientY-$(this).offset().top+$(document).scrollTop();
	if(tpArg.on==true && tpArg.tipsTxt!=""){
		var html='<div class="tips" style="top:'+tipTop+'px;left:'+tipLeft+'px; background:'+tpArg.bg+';font-size:'+tpArg.fontSize+'px">'+tpArg.tipsTxt+'<span class="removeBtn hide">×</span></div>';
		if(tpArg.simple==true){
			html='<div class="tips" style="top:'+tipTop+'px;left:'+tipLeft+'px; background:'+tpArg.bg+';font-size:'+tpArg.fontSize+'px; min-width:60px; min-height:60px">'+tpArg.tipsTxt+'<span class="removeBtn hide">×</span></div>';		}
		$(this).append(html);
		alert("添加结束");
		var TipsJson={id:null,pid:null,left:tipLeft,top:tipTop,background:tpArg.bg,fontSize:tpArg.fontSize }
		var timer;
		$('.tips').hover(
			function(){
					var _this=$(this);
					clearTimeout(timer);
					timer=setTimeout(function(){_this.children('.removeBtn').fadeIn()},800)
			},
			function(){
				var _this=$(this);
				clearTimeout(timer);
				_this.children('.removeBtn').fadeOut()
			}
		)
		
		//拖拽
		$( ".tips" ).draggable({ containment: 'parent',stop:function(){
			alert("拖拽结束后");
		}});
		
		$('.tips .removeBtn').unbind('click').click(function(){
			$(this).parent().remove();
			alert("删除后")
		})
		$('.slideControlPanel input:text').val("").next().show();
		tpArg.on=false;
	};
})
/*阅卷完成popBox*/

	//考试名称修改
$('.popBox').dialog({
	autoOpen:false,
	width:480,
	modal: true,
	resizable:false,
	close:function(){$(this).dialog("close")}
});
		

$( ".correctEndBtn" ).click(function(){
	$( ".correctEndBox" ).dialog( "open" );
	return false;
});
		




//放大镜
function zoom(){
	var oSmall=$('.testPaperSlideList .current');
	var img_src=oSmall.children('img').attr('src');
	$('body').append('<div id="zoomInBox" class="zoomInBox hide"><img src="'+img_src+'" alt=""/></div>');
	oSmall.append('<div id="mask" class="mask"></div>');
	var mask=$('#mask');
	
	var oBig=$('#zoomInBox');
	var oImg=$('.zoomInBox img');
	
	oSmall.mousemove(function(){
		mask.show();
		oBig.show();
	});
	
	oSmall.mouseout(function(){
		mask.hide();
		oBig.hide();
	});
	
	oSmall.mousemove(function(event){
		var l=event.pageX-oSmall.offset().left-mask.width()/2;
		var t=event.pageY-oSmall.offset().top-mask.height()/2;
		var def_w=oSmall.width()-mask.width();
		var def_h=oSmall.height()-mask.height();
		console.log(l)
		
		l<0 && (l=0);
		l>def_w && (l=def_w);
		t<0 && (t=0);
		t>def_h && (t=def_h)
		
		mask.css({'left':l,'top':t});
		oBig.css({'left':event.pageX+80,'top':event.pageY-50});
		oImg.css({'left':-l*(oImg.width()-oBig.width())/def_w,'top':-t*(oImg.height()-oBig.height())/def_h});
	});
};
	$('.zoom').toggle(
		function(){
			$(this).addClass('cancel_zoom');
			zoom();
		},	
		function(){
			$(this).removeClass('cancel_zoom');
			$('#mask,#zoomInBox').remove();
		}
	);
})
</script>
</head>

<body class="teacher">
<div class="head"></div>
<!--top_end--> 
<!--主体-->
<div class="cont24">
    <div class="grid24 main">
        <div class="grid_5 main_l">
            <div class="clearfix item l_userInfo">
		<img src="../../images/teacher_l.jpg">
                <a style="border-right:1px solid #ddd"><em>30</em><br>试卷</a><a><em>300</em><br>课程</a>
            </div>
            <div class="item l_asideMenu">
                <h4>我的档案</h4>
                <ul class="setupMenu">
                    <li><a class="lisA ac" href="javascript:;"><i></i>个人设置</a>
                        <ul class="subMenu">
                            <li><a class="ac" href="#">信息</a></li>
                            <li><a href="#">通知</a></li>
                            <li><a href="#">系统消息</a></li>
                            <li><a href="#">我的私信</a></li>
                        </ul>
                    </li>
                    <li><a class="lisB" href="javascript:;"><i></i>考试与试卷</a>
                        <ul class="subMenu hide">
                            <li><a href="#">考试管理</a></li>
                            <li><a href="#">试卷管理</a></li>
                        </ul>
                    </li>
                    <li><a class="lisC" href="javascript:;"><i></i>题目与推题</a>
                        <ul class="subMenu hide">
                            <li><a href="#">题目管理</a></li>
                            <li><a href="#">题目推送</a></li>
                        </ul>
                    </li>
                    <li><a class="lisD" href="javascript:;"><i></i>作业管理</a>
                        <ul class="subMenu hide">
                            <li><a href="#"></a></li>
                            <li><a href="#">1403班</a></li>
                            <li><a href="#">1404班</a></li>
                            <li><a href="#">1405班</a></li>
                            <li><a href="#">1406班</a></li>
                        </ul>
                    </li>
                    <li><a class="lisF" href="javascript:;"><i></i>课程管理</a>
                        <ul class="subMenu hide">
                            <li><a class="ac" href="#">课程管理</a></li>
                            <li><a href="#">评论管理</a></li>
                            <li><a href="#">课程总结</a></li>
                            <li><a href="#">家长会管理</a></li>
                        </ul>
                    </li>
                    <li><a class="lisG" href="javascript:;"><i></i>数据统计中心</a>
                        <ul class="subMenu hide">
                            <li><a href="#">班级统计</a></li>
                            <li><a href="#">熊孩子管理器</a></li>
                            <li><a href="#">个人统计</a></li>
                        </ul>
                    </li>
                    <li><a class="lisH" href="javascript:;"><i></i>教研工作</a>
                        <ul class="subMenu hide">
                            <li><a href="#">教研课题</a></li>
                            <li><a href="#">教学计划</a></li>
                            <li><a href="#">听课评课</a></li>
                            <li><a href="#">教研组资料</a></li>
                            <li><a href="#">教研日记</a></li>
                        </ul>
                    </li>
                    <li><a class="lisH" href="javascript:;"><i></i>备课</a>
                        <ul class="subMenu hide">
                            <li><a href="#"><span>公文包(教案|讲义|个人教学计划)</span></a></li>
                            <li><a href="#">资料袋</a></li>
                        </ul>
                    </li>
                    <li><a class="lisH" href="javascript:;"><i></i>我的收藏</a>
                        <ul class="subMenu hide">
                            <li><a href="#">收藏的讲义</a></li>
                            <li><a href="#">收藏的课程</a></li>
                        </ul>
                    </li>
                    <li><a class="lisH" href="javascript:;"><i></i>答疑管理</a>
                        <ul class="subMenu hide">
                            <li><a href="#">暂无内容(空)</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
        <div class="grid_19 main_r">
            <div class="main_cont test_class_overall_appraisal">
                <div class="title"> <a href="#" class="txtBtn backBtn"></a>
                    <h4>试卷名称试卷名称试卷名称</h4>
                    <div class="title_r">
                        <div class="pageCount"></div>
                    </div>
                </div>
                <div class="correctPaper">
            <h5>孙悟空的《期末考试模拟试卷》</h5>
                    <ul class="up_details_list">
                        <li class="clearfix">
                            <p>地区：<span>北京&nbsp;&nbsp;海淀区</span></p>
                            <p>年级：<span>一年级</span></p>
                            <p>科目：<span>数学</span></p>
                            <p>版本：<span>人教版</span></p>
                        </li>
                        <li class="clearfix">
                            <p>知识点：<span>追击问题，相遇问题</span></p>
                        </li>
                        <li class="clearfix">
                            <p>作业简介：<span>试卷简介试卷简介试卷简介试卷简介试卷简介试卷简介试卷简介试卷简介试卷简介试卷简介试卷简介试卷简介试卷简介试卷
                                简介试卷简介试卷简介试卷简介试卷简介</span></p>
                        </li>
                    </ul>
                    <div class="slidClip"></div>
            <div class="correctPaperSlide">
                <div class="testPaperWrap mc pr">
                    <ul class="testPaperSlideList slid">
                        <li name="111"><img id="111" src="../../images/testPaper.jpg"  alt=""/></li>
                        <li name="222"><img src="../../images/homePageBG.jpg" alt=""/></li>
                        <li name="333"><img src="../../images/schoolBG.jpg"  alt=""/></li>
                        <li name="444"><img src="../../images/testPaper02.jpg"  alt=""/></li>
                        <li name="555"><img src="../../images/testPaper03.jpg"  alt=""/></li>
                        <li name="666"><img src="../../images/schoolBG.jpg"  alt=""/></li>
                    </ul>
                    <a href="javascript:;" id="prevBtn" class="correctPaperPrev">上一页</a> <a href="javascript:;" id="nextBtn" class="correctPaperNext">下一页</a>
                    <div class="sliderBtnBar"></div>
                </div>
              </div>  
                <div class="slideControlPanel">
                    <div class="setBg" title="设定背景">
                        <div class="pop"> <span></span> <a class="red"></a> <a class="pink"></a> <a class="yellow"></a> <a class="blue"></a> <a class="green"></a> </div>
                    </div>
                    <div class="setFont"><span class="tit"></span>
                        <div class="pop"> <span></span> <a>12</a> <a>14</a> <a>16</a> </div>
                    </div>
                    <div class="mySelect correctSelect"> <span class="title">点拨</span>
                        <ul class="selectList pop">
                            <li><a href="javascript:;">点拨</a></li>
                            <li><a href="javascript:;">评分</a></li>
                        </ul>
                        <a class="openBtn" href="javascript:;"></a> </div>
                    <div class="comment">
                        <input class="text" type="text" style="padding:3px 0 !important">
                    </div>
                    <div class="score hide">
                    	<b>得分</b>
                        <input class="text" type="text" style=" padding:3px 0 !important">
                    </div>
                    <div class="ok">确定</div>
                    <div class="zoom" title="放大"></div>
                    <div class="help" title="使用帮助">？</div>
                </div>
                <br>
                <div class="tc bottomBtnBar"><button type="button" style="height:46px; width:312px" class="bg_green correctEndBtn">批改完成</button></div>
                
            
        </div>
            </div>
        </div>
    </div>
</div>


<!--主体end-->
<!--弹框-->
<div id="dati" class="popBox correctEndBox" title="完成答题"> 
    <!--完成答题-->
    <div class="popCont" style="padding-left:100px">
        	 <p class="">您已完成本题答案的批阅</p>
             <br>
             <p>得分 <input type="text" class="text w50"> 分&nbsp;&nbsp;&nbsp;&nbsp;满分 100 分</p>
             <br>
        
    </div>
    <div class="popBtnArea">
        <button type="button" class="okBtn">确定</button>
        <button type="button" class="cancelBtn">取消</button>
    </div>
</div>
</body>
</html>
