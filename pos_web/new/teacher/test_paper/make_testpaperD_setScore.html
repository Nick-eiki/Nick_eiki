<!doctype html>
<html id="html">
<head>
<meta charset="utf-8">
<title>教师--个人中心--考试管理--组卷</title>
<link href="../../css/base.css" rel="stylesheet" type="text/css">
<link href="../../css/jquery-ui.css" rel="stylesheet" type="text/css">
<link href="../../css/popBox.css" rel="stylesheet" type="text/css">
<link href="../../css/teacher.css" rel="stylesheet" type="text/css">
<link href="../../js/ztree/zTreeStyle/zTreeStyle.css" rel="stylesheet" type="text/css">
<script src="../../js/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="../../js/jquery-ui.min.js" type="text/javascript"></script>
<script src="../../js/base.js" type="text/javascript"></script>
<script src="../../js/jquery.validationEngine.min.js" type="text/javascript"></script>
<script src="../../js/jquery.validationEngine-zh_CN.js" type="text/javascript"></script>
<script src="../../js/ztree/jquery.ztree.all-3.5.min.js" type="text/javascript"></script>
<script>
$(function(){
	
	//全选
	$('.score').each(function(index, element) {
        var itemCheckAllBtn=$(this).find('.itemCheckAll');
    	var checkboxs=$(this).find('dd input:checkbox');
		itemCheckAllBtn.checkAll(checkboxs);
	});
	
	//验证是否有未填分数的表单
	function chkInput(){
		var chk;
		$('.score dd input:text').each(function() {
            if($(this).val()=="") {
				$(this).focus();
				chk=false;
				return false;
			}
			else{chk=true}
		});
		return chk;
	};

	$('.saveSetBtn').click(function(){
		alert(   chkInput()   )
	})
	
	
	
	
	function mergeScore(){//计算试卷最终总成绩
		var totalScore=0;
		var testpaper_totalScore=$('.testpaper_totalScore');
		$('.itemScore').each(function(index, element) {
            var val=parseInt($(this).text());
			totalScore+=val;
        });
		testpaper_totalScore.text(totalScore);
	};
	
	function set_itemScore(pa,btn){//点击设置分数
		var itemScore=pa.next('em').children('b');//显示单个题型总分
		var item_totalScore=0;//单个总分
			setScore=btn.prev('.text').val();//设定的分数
			if(isNaN(setScore) || setScore=="" ){
				popBox.errorBox('请填写数字!!');
				btn.prev('.text').val('').focus();
				return false;
			};
		var sel_chkbox=pa.find('dd input:checkbox[checked="checked"]');	
			sel_chkbox.each(function() {
				setScore=parseInt(setScore);
				$(this).next('.text').val(setScore);
			});
			pa.find('dd input:text').each(function() {
				var inputVal=parseInt($(this).val())
				if(isNaN(inputVal)) inputVal=0;
				item_totalScore+=inputVal;
			});
		btn.prev('.text').val("");
		itemScore.text(item_totalScore);
	};
	
	function itemScore(pa){//计算"每个"题型的总分数
		var totalScore=pa.next('em').children('b');
		var inputs=pa.find('dd .text');
		var itemScore=0;
		inputs.each(function(index, element) {
			var val=parseInt($(this).val());
			if(isNaN(val)) val=0;
			itemScore+=val;
        });
		totalScore.text(itemScore);
	};
	
	//初始化分数
	$('.score').each(function(index, element) {
		itemScore($(this));
	});
	mergeScore();
	
	
	
	$('.score dt .set_btn').click(function(){
		var pa=$(this).parents('.score');
		set_itemScore(pa,$(this))
		mergeScore();
	});
	
	$('#setGlobalSeoreBtn').click(function(){
		set_itemScore($('.scoreList'),$(this));
		
		$('.score').each(function(index, element) {
			itemScore($(this));
        });
		mergeScore();
	});

	$('.score dd .text').change(function(){
		var pa=$(this).parents('.score');
		itemScore(pa);
		mergeScore();
	})
})


</script>




</head>

<body class="teacher">
<div class="head"></div>
<!--top_end--> 
<!--主体-->
<div class="cont24">
    <div class="grid24 main">
        <div class="grid_5 main_l">
            <div class="clearfix item l_userInfo"> <img src="../../images/teacher_l.jpg"> <a style="border-right:1px solid #ddd"><em>30</em><br>
                试卷</a> <a><em>300</em><br>
                课程</a> </div>
            <div class="item l_asideMenu">
                <h4>我的档案</h4>
                <ul class="setupMenu">
                    <li><a class="lisA ac" href="javascript:;"><i></i>个人设置</a>
                        <ul class="subMenu">
                            <li><a class="ac" href="#">信息</a></li>
                            <li><a href="#">通知</a></li>
                            <li><a href="#">系统消息</a></li>
                            <li><a href="#">我的私信</a></li>
                        </ul>
                    </li>
                    <li><a class="lisB" href="javascript:;"><i></i>考试与试卷</a>
                        <ul class="subMenu hide">
                            <li><a href="#">考试管理</a></li>
                            <li><a href="#">试卷管理</a></li>
                        </ul>
                    </li>
                    <li><a class="lisC" href="javascript:;"><i></i>题目与推题</a>
                        <ul class="subMenu hide">
                            <li><a href="#">题目管理</a></li>
                            <li><a href="#">题目推送</a></li>
                        </ul>
                    </li>
                    <li><a class="lisD" href="javascript:;"><i></i>作业管理</a>
                        <ul class="subMenu hide">
                            <li><a href="#"></a></li>
                            <li><a href="#">1403班</a></li>
                            <li><a href="#">1404班</a></li>
                            <li><a href="#">1405班</a></li>
                            <li><a href="#">1406班</a></li>
                        </ul>
                    </li>
                    <li><a class="lisF" href="javascript:;"><i></i>课程管理</a>
                        <ul class="subMenu hide">
                            <li><a class="ac" href="#">课程管理</a></li>
                            <li><a href="#">评论管理</a></li>
                            <li><a href="#">课程总结</a></li>
                            <li><a href="#">家长会管理</a></li>
                        </ul>
                    </li>
                    <li><a class="lisG" href="javascript:;"><i></i>数据统计中心</a>
                        <ul class="subMenu hide">
                            <li><a href="#">班级统计</a></li>
                            <li><a href="#">熊孩子管理器</a></li>
                            <li><a href="#">个人统计</a></li>
                        </ul>
                    </li>
                    <li><a class="lisH" href="javascript:;"><i></i>教研工作</a>
                        <ul class="subMenu hide">
                            <li><a href="#">教研课题</a></li>
                            <li><a href="#">教学计划</a></li>
                            <li><a href="#">听课评课</a></li>
                            <li><a href="#">教研组资料</a></li>
                            <li><a href="#">教研日记</a></li>
                        </ul>
                    </li>
                    <li><a class="lisH" href="javascript:;"><i></i>备课</a>
                        <ul class="subMenu hide">
                            <li><a href="#"><span>公文包(教案|讲义|个人教学计划)</span></a></li>
                            <li><a href="#">资料袋</a></li>
                        </ul>
                    </li>
                    <li><a class="lisH" href="javascript:;"><i></i>我的收藏</a>
                        <ul class="subMenu hide">
                            <li><a href="#">收藏的讲义</a></li>
                            <li><a href="#">收藏的课程</a></li>
                        </ul>
                    </li>
                    <li><a class="lisH" href="javascript:;"><i></i>答疑管理</a>
                        <ul class="subMenu hide">
                            <li><a href="#">暂无内容(空)</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
        <div class="grid_19 main_r">
            <div class="main_cont make_setScore">
                <div class="title">
                    <h4>组卷-设定分值</h4>
                </div>
                <ul class="stepList clearfix">
                    <li class="step_finish"><span>试卷类型</span><i></i></li>
                    <li class="step_finish"><span>试卷结构</span><i></i></li>
                    <li class="step_finish step_ac_before"><span>筛选题目</span><i></i></li>
                    <li class="step_ac step_end"><span>设定分值</span><i></i></li>
                </ul>
                <br>
                <h4>试卷结构</h4>
                <form>
                    <ul class="form_list scoreList">
                        <li class="row">
                            <div class="formL">
                                <label>题型题型一题型一题型一一：</label>
                            </div>
                            <div class="formR">
                                <dl class="score clearfix">
                                    <dt>每题
                                        <input type="text" class="text w30">
                                        分
                                        <button type="button" class="set_btn">确定</button>&nbsp;&nbsp;&nbsp;<input class="itemCheckAll" type="checkbox"> 全选
                                        
                                    </dt>
                                    <dd>
                                        <input type="checkbox">
                                        题目1_id
                                        <input type="text" class="text w30">
                                    </dd>
                                    <dd>
                                        <input type="checkbox">
                                        题目1_id
                                        <input type="text" class="text w30">
                                    </dd>
                                    <dd>
                                        <input type="checkbox">
                                        题目1_id
                                        <input type="text" class="text w30">
                                    </dd>
                                    <dd>
                                        <input type="checkbox">
                                        题目1_id
                                        <input type="text" class="text w30">
                                    </dd>
                                    <dd>
                                        <input type="checkbox">
                                        题目1_id
                                        <input type="text" class="text w30">
                                    </dd>
                                </dl>
                                <em class="scoreBar"><b class="itemScore">0</b>分</em>
                            </div>
                        </li>
                        <li class="row">
                            <div class="formL">
                                <label>题型二：</label>
                                
                            </div>
                            <div class="formR">
                                <dl class="score clearfix">
                                    <dt>每题
                                        <input type="text" class="text w30">
                                        分
                                        <button type="button" class="set_btn">确定</button>&nbsp;&nbsp;&nbsp;<input class="itemCheckAll" type="checkbox"> 全选
                                    </dt>
                                    <dd>
                                        <input type="checkbox">
                                        题目1_id
                                        <input type="text" class="text w30">
                                    </dd>
                                    <dd>
                                        <input type="checkbox">
                                        题目1_id
                                        <input type="text" class="text w30">
                                    </dd>
                                    <dd>
                                        <input type="checkbox">
                                        题目1_id
                                        <input type="text" class="text w30">
                                    </dd>
                                </dl>
                                <em class="scoreBar"><b class="itemScore">0</b>分</em>
                            </div>
                        </li>
                        <li class="row">
                            <div class="formL">
                                <label>题型三：</label>
                                
                            </div>
                            <div class="formR">
                                <dl class="score clearfix">
                                    <dt>每题
                                        <input type="text" class="text w30">
                                        分
                                        <button type="button" class="set_btn">确定</button>&nbsp;&nbsp;&nbsp;<input class="itemCheckAll" type="checkbox"> 全选
                                    </dt>
                                    <dd>
                                        <input type="checkbox">
                                        题目1_id
                                        <input type="text" class="text w30">
                                    </dd>
                                    <dd>
                                        <input type="checkbox">
                                        题目1_id
                                        <input type="text" class="text w30">
                                    </dd>
                                    <dd>
                                        <input type="checkbox">
                                        题目1_id
                                        <input type="text" class="text w30">
                                    </dd>
                                </dl>
                                <em class="scoreBar"><b class="itemScore">0</b>分</em>
                            </div>
                        </li>
                        <!--<li class="row">
                            <div class="formL">
                                <label>题型三：</label>
                            </div>
                            <div class="formR">
                                <dl class="score clearfix">
                                    <dt>每题
                                        <input type="text" class="text w30">
                                        分</dt>
                                    <dd>
                                        <dl class="subScore">
                                            <dt>9题
                                                <input type="text" class="text w30">
                                                分</dt>
                                            <dd>
                                                <input type="checkbox">
                                                题目1_id
                                                <input type="text" class="text w30">
                                            </dd>
                                            <dd>
                                                <input type="checkbox">
                                                题目1_id
                                                <input type="text" class="text w30">
                                            </dd>
                                            <dd>
                                                <input type="checkbox">
                                                题目1_id
                                                <input type="text" class="text w30">
                                            </dd>
                                        </dl>
                                    </dd>
                                    <dd>
                                        <dl class="subScore">
                                            <dt>9题
                                                <input type="text" class="text w30">
                                                分</dt>
                                            <dd>
                                                <input type="checkbox">
                                                题目1_id
                                                <input type="text" class="text w30">
                                            </dd>
                                            <dd>
                                                <input type="checkbox">
                                                题目1_id
                                                <input type="text" class="text w30">
                                            </dd>
                                            <dd>
                                                <input type="checkbox">
                                                题目1_id
                                                <input type="text" class="text w30">
                                            </dd>
                                            <dd>
                                                <input type="checkbox">
                                                题目1_id
                                                <input type="text" class="text w30">
                                            </dd>
                                            <dd>
                                                <input type="checkbox">
                                                题目1_id
                                                <input type="text" class="text w30">
                                            </dd>
                                            <dd>
                                                <input type="checkbox">
                                                题目1_id
                                                <input type="text" class="text w30">
                                            </dd>
                                        </dl>
                                    </dd>
                                </dl>
                                <em>总分:10</em>
                            </div>
                        </li>-->
                        <li class="row">
                            <div class="formL"> </div>
                            <div class="pr">
                                <label>设置选定题目的分数为：</label>
                                <input type="text" class="text w30">
                                <button  id="setGlobalSeoreBtn" type="button" class="mini_btn make_btn">确定</button>
                                &nbsp;&nbsp;&nbsp;<em class="scoreBar">总分:<b class="testpaper_totalScore">0</b></em>
                            </div>
                        </li>
                    </ul>
                </form>
                <br>
                <p class="tc bottomBtnBar">
                    <button type="button" class="btn40 bg_blue preStepBtn">上一步</button>
                    <button type="button" class="btn40 bg_blue saveSetBtn">保存设置</button>
                    <button type="button" class="btn49 bg_blue viewBtn">试卷预览</button>
                </p>
            </div>
        </div>
    </div>
</div>
</div>
<!--主体end-->
</body>
</html>
