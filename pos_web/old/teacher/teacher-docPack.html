<!doctype html>
<html id="html">
<head>
<meta charset="utf-8">
<title>教师-备课-公文包</title>
<link href="../css/base.css" type="text/css" rel="stylesheet">
<link href="../css/teacher.css" type="text/css" rel="stylesheet">
<link href="../css/jquery-ui.css" type="text/css" rel="stylesheet">
<link href="../css/popBox.css" type="text/css" rel="stylesheet">
<script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="../js/main.js" type="text/javascript"></script>
<script src="../js/base.js" type="text/javascript"></script>
<script src='../js/jquery-ui.min.js' type="text/javascript"></script>
<script>
$(function(){

	var obj={};
	/*
	obj={
		btn: //触发按钮(编辑/新建)
		title:"语文课"  //名称	
		visual:[]  //可见性
		addNew:false  //是否新增
		visualVal:[]   //返回给后台的checkbox value
	}
	*/
	obj.addNew=false;
	obj.visual=[];
	obj.visualVal=[];
	function open_docBagBox(btn,addNew){//弹出编辑窗口,如果是编辑模式,读取原有的值,否则清除
		obj.btn=btn;
		var pa=btn.parent();
		if(addNew){//新增模式,清除所有设置
		obj.addNew=true;
		$('.docBagBox :checkbox').removeAttr('checked');
		$('.docBagBox :text').val("");
		}
		else{
			obj.addNew=false;
			obj['title']=pa.children('h5').text();
			pa.children('.visual').children('span').each(function() {
				obj.visual.push($(this).text())
			});
			$('.docBagBox :checkbox').next().each(function() {
				for(var i=0; i<obj.visual.length; i++){
					if($(this).text()==obj.visual[i]){
						$(this).prev().attr('checked',true);
					}
				}
			});
			$('.docBagBox :text').val(obj.title);
		}
	}
	
	function edit_okBtn(obj){//编辑
		var pa=obj.btn.parent();
		obj.title=$('.docBagBox .text').val();
		obj.visual.length=obj.visualVal.length=0;
		$('.docBagBox :checkbox:checked').next().each(function() {
			obj.visual.push("<span>"+$(this).text()+"</span>");
        });
		$('.docBagBox :checkbox:checked').each(function() {
			obj.visualVal.push($(this).val());
        });
		var visSpan=obj.visual.join('');
		pa.children('h5').children('a').text(obj.title);
		pa.children('.visual').html('<em>可见:</em>'+visSpan);
	}
	
	
	
	function add_okBtn(obj){//添加
		obj.title=$('.docBagBox .text').val();
		obj.visual.length=obj.visualVal.length=0;
		$('.docBagBox :checkbox:checked').next().each(function() {
			obj.visual.push("<span>"+$(this).text()+"</span>");
        });
		$('.docBagBox :checkbox:checked').each(function() {
			obj.visualVal.push($(this).val());
        });
		var visSpan=obj.visual.join('');
		var html='<li><button type="button" title="编辑"></button><h5><a href="#">'+obj.title+'</a></h5><p class="visual"><em>可见:</em>'+visSpan+'</p><p class="cont"></p></li>';
		$('.docBagList').append(html);
	}
	
//定义弹出框	
	$('.docBagBox').dialog({
		autoOpen: false,
			width:550,
			modal: true,
			resizable:false,
			buttons:[
				{
					text: "确定",
					click: function() {
						if(obj.addNew==true){
						add_okBtn(obj);
						}
						else{
						edit_okBtn(obj);
						}
						$( this ).dialog( "close" );
					}
				},
				{
					text: "取消",
					click: function() {
						$( this ).dialog( "close" );
					} 
				}
			]
	});

//编辑公文袋	
	$('.docBagList li button').live('click',function(){
		open_docBagBox($(this));
		$( ".docBagBox").dialog("open" );
		$( ".docBagBox").dialog("option", "title","编辑公文袋"); 
	})

//新建公文袋	
	$('.addDocBagBtn').click(function(){
		open_docBagBox($(this),"clear");
		$( ".docBagBox" ).dialog( "open" );
		$( ".docBagBox").dialog("option", "title","新建公文袋") 
	})
	


})
</script>
</head>

<body>
<!--顶部开始-->
<div class="min_head">
    <div class="cont24 clearfix">
        <div class="head_left grid_6"><i class="io"></i>欢迎来到班海网！</div>
        <div class="userCenter grid_6 push_12 pr">
            <div class="login"><a class="loginBtn" href="#">登录</a><a class="userReg" href="#">免费注册</a></div>
            <div class="userAccount hide grid_3 alpha omega"> <img src="../images/user01.jpg">
                <h5>张三疯<i></i></h5>
                <ul class="hide">
                    <li><a class="tB" href="#">我的设置</a></li>
                    <li><a class="tC" href="#">我的学校</a></li>
                    <li><a class="tC" href="#">我的班级</a></li>
                    <li><a class="quit" href="#">退出</a></li>
                </ul>
            </div>
            <div class="userMsg grid_2 hide alpha omega">
                <h5><i></i><em>(3)</em></h5>
                <ul class="subMenu hide">
                    <li><a class="tB" href="#">我的私信(2)</a></li>
                    <li><a class="tC" href="#">我的品论(3)</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!--顶部结束--> 
<!--主体内容开始-->

<div class="main cont24  clearfix">
    <div class="main_head pr clearfix"> <img class="img_lm" src="../images/teacher_lm.jpg">
        <ul class="infoList">
            <li><span>30</span>作业</li>
            <li><span>300</span>错题</li>
            <li><span>49</span>精品课程</li>
        </ul>
        <h2>毛毛虫</h2>
        <p class="signTxt">队伍不好带呀<i>编辑</i></p>
        <p>学　校:北京四中</p>
        <p class="handCls">班　级:101班 班主任&nbsp;&nbsp;&nbsp;201班 数学教师 </p>
        <p>教研组:数学</p>
    </div>
    <div class="mainNav">
        <ul class="mainNav_R clearfix">
            <li> <i class="set"></i><span class="bColor setJs">个人设置<i class="Triangle"></i></span>
                <ul class="tab hide">
                    <li>零食</li>
                    <li>零食</li>
                    <li>零食</li>
                    <li>零食</li>
                </ul>
            </li>
            <li><i class="dressUp"></i><span class="dress_k">装扮空间</span></li>
            <li><i class="management"></i><span>个人管理中心</span></li>
        </ul>
    </div>
    <div class="currentLeft grid_5 push_1">
        <div class="item l_asideMenu">
            <h4>项目</h4>
            <ul class="setupMenu">
                <li><a class="lisA" href="javascript:;"><i></i>个人设置</a>
                    <ul class="subMenu hide">
                        <li><a href="#">基本信息</a></li>
                        <li><a href="#">头像管理</a></li>
                        <li><a href="#">密码管理</a></li>
                        <li><a href="#">邮箱管理</a></li>
                    </ul>
                </li>
                <li><a class="lisB" href="javascript:;"><i></i>我的档案</a>
                    <ul class="subMenu hide">
                        <li><a href="#">暂无内容(空)</a></li>
                    </ul>
                </li>
                <li><a class="lisC" href="javascript:;"><i></i>消息中心</a>
                    <ul class="subMenu hide">
                        <li><a href="#">我的通知</a></li>
                        <li><a href="#">发短信</a></li>
                        <li><a href="#">我的私信</a></li>
                    </ul>
                </li>
                <li><a class="lisD" href="javascript:;"><i></i>考试试卷和成绩</a>
                    <ul class="subMenu hide">
                        <li><a href="#">考试管理</a></li>
                        <li><a href="#">学期总评</a></li>
                        <li><a href="#">科目总评</a></li>
                    </ul>
                </li>
                <li><a class="lisF" href="javascript:;"><i></i>教研工作</a>
                    <ul class="subMenu hide">
                        <li><a class="ac" href="#">教研课题</a></li>
                        <li><a href="#">教学计划</a></li>
                        <li><a href="#">听课评课</a></li>
                        <li><a href="#">教研组资料</a></li>
                        <li><a href="#">教研日记</a></li>
                    </ul>
                </li>
                <li><a class="lisG" href="javascript:;"><i></i>备课</a>
                    <ul class="subMenu hide">
                        <li><a href="#">个人教学计划</a></li>
                        <li><a href="#">公文包(教案|讲义|经典视频)</a></li>
                    </ul>
                </li>
                <li><a class="lisH" href="javascript:;"><i></i>试卷与作业</a>
                    <ul class="subMenu hide">
                        <li><a href="#">试卷管理</a></li>
                        <li><a href="#">组织测验</a></li>
                        <li><a href="#">作业管理</a></li>
                        <li><a href="#">题目管理</a></li>
                        <li><a href="#">题目推送</a></li>
                    </ul>
                </li>
                <li><a class="lisH" href="javascript:;"><i></i>课程管理</a>
                    <ul class="subMenu hide">
                        <li><a href="#">课程管理</a></li>
                        <li><a href="#">评论管理</a></li>
                        <li><a href="#">课程总结</a></li>
                        <li><a href="#">家长会管理</a></li>
                    </ul>
                </li>
                <li><a class="lisH" href="javascript:;"><i></i>成绩统计表</a>
                    <ul class="subMenu hide">
                        <li><a href="#">暂无内容(空)</a></li>
                    </ul>
                </li>
                <li><a class="lisH" href="javascript:;"><i></i>我的收藏</a>
                    <ul class="subMenu hide">
                        <li><a href="#">收藏的讲义</a></li>
                        <li><a href="#">收藏的课程</a></li>
                    </ul>
                </li>
                <li><a class="lisH" href="javascript:;"><i></i>答疑管理</a>
                    <ul class="subMenu hide">
                        <li><a href="#">暂无内容(空)</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
    <div class="currentRight grid_16 push_2">
        <div class="noticeH clearfix">
            <h3 class="h3L">公文包</h3>
            <div class="fr"> <a href="javascript:;" class="B_btn120 addDocBagBtn">添加公文袋</a> </div>
        </div>
        <hr>
        <div class="docPack pr">
            <ul class="docBagList clearfix">
                <li>
                    <button type="button" title="编辑"></button>
                    <h5><a href="teacher-docPack_docBaglist.html">语文课公文袋</a></h5>
                    <p class="visual"><em>可见:</em><span>本班学生</span><span>所有人</span></p>
                    <p class="cont"><em>教案:</em>3&nbsp;&nbsp;<em>讲义:</em>3&nbsp;&nbsp;<em>教学计划:</em>3</p>
                </li>
                <li>
                    <button type="button" title="编辑"></button>
                    <h5><a href="teacher-docPack_docBaglist.html">语文课公文袋</a></h5>
                    <p class="visual"><em>可见:</em><span>本班学生</span><span>所有人</span></p>
                    <p class="cont"><em>教案:</em>3&nbsp;&nbsp;<em>讲义:</em>23&nbsp;&nbsp;<em>教学计划:</em>333</p>
                </li>
                <li>
                    <button type="button" title="编辑"></button>
                    <h5><a href="teacher-docPack_docBaglist.html">语文课公文袋</a></h5>
                    <p class="visual"><em>可见:</em><span>本班学生</span><span>所有人</span></p>
                    <p class="cont"><em>教案:</em>3&nbsp;&nbsp;<em>讲义:</em>23&nbsp;&nbsp;<em>教学计划:</em>333</p>
                </li>
                <li>
                    <button type="button" title="编辑"></button>
                    <h5><a href="teacher-docPack_docBaglist.html">语文课公文袋</a></h5>
                    <p class="visual"><em>可见:</em><span>本班学生</span><span>所有人</span></p>
                    <p class="cont"><em>教案:</em>3&nbsp;&nbsp;<em>讲义:</em>23&nbsp;&nbsp;<em>教学计划:</em>333</p>
                </li>
            </ul>
        </div>
    </div>
</div>
<!--主体内容结束-->

<div class="footWrap">
    <div class="foot">
        <dl>
            <dt>关于我们</dt>
            <dd><a href="#">关于班海</a></dd>
            <dd><a href="#">招聘启事</a></dd>
            <dd><a href="#">法律声明</a></dd>
            <dd><a href="#">网站地图</a></dd>
        </dl>
        <dl>
            <dt>商务合作</dt>
            <dd><a href="#">商务合作</a></dd>
            <dd><a href="#">友情链接</a></dd>
            <dd><a href="#">资源合作</a></dd>
            <dd><a href="#">视频合作</a></dd>
        </dl>
        <dl>
            <dt>联系我们</dt>
            <dd><a href="#">在线客服</a></dd>
            <dd><a href="#">官方微博</a></dd>
            <dd><a href="#">意见反馈</a></dd>
            <dd><a href="#">关注微信</a></dd>
        </dl>
        <dl>
            <dt>问题帮助</dt>
            <dd><a href="#">常见问题</a></dd>
            <dd><a href="#">用户答疑</a></dd>
        </dl>
        <p>@ 2014 班海 http://www.banhai.com 北京三海教育科技有限公司 版权所有<br>
            京ICP证080367号 京ICP备08103829号  北京市公安局海淀分局备案号1101081714 </p>
    </div>
</div>
<!--弹出框  创建/编辑公文袋-->
<div class="popBox docBagBox hide" title="创建公文袋">
    <form>
        <ul class="form_list">
            <li>
                <div class="formL">
                    <label for="name"><i></i>公文袋名称:</label>
                </div>
                <div class="formR">
                    <input id="name" type="text" class="text">
                </div>
            </li>
            <li>
                <div class="formL">
                    <label for="name"><i></i>公文袋权限:</label>
                </div>
                <div class="formR">
                    <input type="checkbox" value="001">
                    <label>本班学生</label>
                    &nbsp;&nbsp;
                    <input type="checkbox" value="002">
                    <label>教研组</label>
                    &nbsp;&nbsp;
                    <input type="checkbox" value="003">
                    <label>所有人</label>
                    <br>
                </div>
            </li>
        </ul>
    </form>
</div>
</body>
</html>
