<!doctype html>
<html id="html">
<head>
<meta charset="utf-8">
<title>教师-课程管理-课程总结</title>
<link href="../css/base.css" type="text/css" rel="stylesheet">
<link href="../css/teacher.css" type="text/css" rel="stylesheet">
<link href="../css/jquery-ui.css" type="text/css" rel="stylesheet">
<link href="../css/popBox.css" type="text/css" rel="stylesheet">
<link href="../js/ztree/zTreeStyle/zTreeStyle.css" rel="stylesheet" type="text/css">
<script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="../js/main.js" type="text/javascript"></script>
<script src="../js/base.js" type="text/javascript"></script>
<script src='../js/jquery-ui.min.js' type="text/javascript"></script>
<script src="../js/ztree/jquery.ztree.all-3.5.min.js" type="text/javascript"></script>
<script>
$(function(){
	var zNodes =[
		{ id:1, pId:0, name:"语文"},
		{ id:11, pId:1, name:"拼音"},
		{ id:111, pId:11, name:"声母"},
		{ id:112, pId:11, name:"韵母"},
		{ id:12, pId:1, name:"标点符号"},
		{ id:13, pId:1, name:"造句"},
		{ id:14, pId:1, name:"语法"},
	];

	
//修改总结	
	var obj={};//数据对象
	var pa;//单元
	
	function getVal(tpa){//获取弹出框中的输入值
		obj.title=tpa.find('.title').val();
		obj.startTime=tpa.find('.startTime').val();
		obj.endTime=tpa.find('.endTime').val();
		obj.point={};
		obj.point.id=[];
		obj.point.name=[];
		var html='';
		var aLi=tpa.find('.labelList').children('li');
		if(aLi.size()>0){
			aLi.each(function(index, element) {
				  obj.point.id.push($(this).attr('val')); 
				  obj.point.name.push($(this).text());
				  html+='<span val="'+obj.point.id[index]+'">'+obj.point.name[index]+'</span>'; 
			});
		}
		else{
			html="空";
		}
		obj.state=tpa.find('.state').val()||"空";
		obj.plan=tpa.find('.plan').val()||"空";
		return html;
	}
	
	$('.courseManage_List li .editBtn').live('click',function(){
		pa=$(this).parent();
		obj.title=pa.find('.title').text();
		obj.startTime=pa.find('.startTime').text();
		obj.endTime=pa.find('.endTime').text();
		obj.point=[];
		pa.find('.Qpoint span').each(function(index, element) {
        	  obj.point.push($(this).attr('val'));  
        });
		obj.state=pa.find('.state').text();
		obj.plan=pa.find('.plan').text();
		
		var html='<ul class="form_list">';
            html+='<li><div class="formL"><label><i></i>总评名称：</label></div><div class="formR"><input type="text" class="text title" value='+obj.title+'><span class="altTxt"><i class="warn_icon"></i>名称不能为空</span></div></li>';
            html+='<li><div class="formL"><label><i></i>时间段：</label></div><div class="formR"><input type="text" class="text startTime" style="width:83px" value="'+obj.startTime+'">&nbsp;&nbsp;至&nbsp;&nbsp;<input type="text" class="text endTime" style="width:83px" value="'+obj.endTime+'"></div></li>';
			html+='<li><div class="formL"><label><i></i>知识难点：</label></div><div class="formR"><div class="treeParent"><button type="button" class="addPointBtn">编辑知识点</button><div class="pointArea hide"><input class="hidVal" type="hidden" value="'+obj.point+'"><h6>已选中知识点:</h6><ul class="labelList"></ul></div></div></div></li>';
			html+='<li><div class="formL"><label>班内氛围：</label></div><div class="formR"><textarea class="state">'+obj.state+'</textarea></div></li>';
			html+='<li><div class="formL"><label><i></i>学习规划：</label></div><div class="formR"><textarea class="plan">'+obj.plan+'</textarea></div></li>';
			html+='<li><div class="formL"><label></label></div><div class="formR"><button type="button" class="btn saveBtn">保存</button>&nbsp;&nbsp;<button type="button" class="btn cancelBtn">取消</button></div></li></ul>';
		$(this).parents('li').append(html).children('div').hide();	
		
		popBox.pointTree2(zNodes,$('.addPointBtn'));//初始化树
		
		$('.saveBtn').live('click',function(){//保存
			//get
			var tpa=$(this).parents('.form_list');
			var html=getVal(tpa);
			//set
			$(pa).find('.title').text(obj.title);
			$(pa).find('.startTime').text(obj.startTime);
			$(pa).find('.endTime').text(obj.endTime);
			$(pa).find('.Qpoint').empty().append(html);
			$(pa).find('.state').text(obj.state);
			$(pa).find('.plan').text(obj.plan);
			$(this).parents('.form_list').remove();
			$(pa).show();	
		})
		
		$('.cancelBtn').live('click',function(){//取消修改cancel
			$(this).parents('.form_list').remove();
			$(pa).show();	
		})
	})
	
//新建总结	
	$('.newSumBtn').die('click').click(function(){
		var html='<div class="popBox newSumBox hide" title="新建总结">';
		html+='<ul class="form_list"><li><div class="formL"><label><i></i>总评名称：</label></div><div class="formR"><input type="text" class="text title" value=""><span class="altTxt"><i class="altTxt"></i>不超过30字</span></div></li>';
		html+='<li><div class="formL"><label><i></i>科目：</label></div><div class="formR"><select><option>语文</option><option>数学</option><option>英语</option></select></div></li>';
		html+='<li><div class="formL"><label><i></i>时间段：</label></div><div class="formR"><input type="text" class="text startTime" style="width:83px" value="">&nbsp;&nbsp;至&nbsp;&nbsp;<input type="text" class="text endTime" style="width:83px" value=""></div></li>';
		html+='<li><div class="formL"><label><i></i>知识难点：</label></div><div class="formR"><div class="treeParent"><button type="button" class="addPointBtn">编辑知识点</button><div class="pointArea hide"><input class="hidVal" type="hidden" value=""><h6>已选中知识点:</h6><ul class="labelList"></ul></div></div></div>	</li>';
		html+='<li><div class="formL"><label>班内氛围：</label></div><div class="formR"><textarea placeholder="不超300字" class="state"></textarea></div></li><li><div class="formL"><label><i></i>学习规划：</label></div><div class="formR"><textarea class="plan" placeholder="不超300字" ></textarea></div></li></ul></div>';
		$('body').append(html);
		
		$('.newSumBox .addPointBtn').click(function(){
			popBox.pointTree(zNodes,$(this));
		})
		$('.newSumBox').dialog({
		autoOpen: false,
		width:580,
		modal: true,
		close: function() {$( this ).remove()},
		resizable:false,
		buttons: [
			{
				text: "保存",
				click: function(e) {
					insertNewItem();
					$( this ).remove();
				}
			},
			{
				text: "取消",
				click: function() {
					$( this ).remove();
				} 
			}
		]
	});

	$( ".newSumBox" ).dialog( "open" );
	return false;
	})
	
	function insertNewItem(btn){//插入新增总结
		var box=$('.newSumBox');
		var spans=getVal(box);
		var html='<li class="clearfix pr"><div><h4 class="title">'+obj.title+'</h4>';
		html+='<p class="time_release"><em class="startTime">'+obj.startTime+'</em> 　至　 <em class="endTime">'+obj.endTime+'</em></p>';
		html+='<dl><dt>知识难点：</dt><dd class="Qpoint">'+spans+'</dd>';
		html+='<dt>学习氛围：</dt><dd class="state">'+obj.state+'</dd>';
		html+='<dt>学习规划：</dt><dd class="plan">'+obj.plan+'</dd></dl>';
		html+='<button type="button" class="btn editBtn">修改</button></div></li>';
		$('.courseManage_List').prepend(html);
	}
	
	//详情
	$('.state_more').hide();
	$('.more_sum').toggle(function(){
		$(this).siblings('.state').hide();
		$(this).siblings('.state_more').show();
	},function(){
		$(this).siblings('.state_more').hide();
		$(this).siblings('.state').show();
	});
});


</script>
</head>

<body>
<!--顶部开始-->
<div class="min_head">
    <div class="cont24 clearfix">
        <div class="head_left grid_6"><i class="io"></i>欢迎来到班海网！</div>
        <div class="userCenter grid_6 push_12 pr">
            <div class="login"><a class="loginBtn" href="#">登录</a><a class="userReg" href="#">免费注册</a></div>
            <div class="userAccount hide grid_3 alpha omega"> <img src="../images/user01.jpg">
                <h5>张三疯<i></i></h5>
                <ul class="hide">
                    <li><a class="tB" href="#">我的设置</a></li>
                    <li><a class="tC" href="#">我的学校</a></li>
                    <li><a class="tC" href="#">我的班级</a></li>
                    <li><a class="quit" href="#">退出</a></li>
                </ul>
            </div>
            <div class="userMsg grid_2 hide alpha omega">
                <h5><i></i><em>(3)</em></h5>
                <ul class="subMenu hide">
                    <li><a class="tB" href="#">我的私信(2)</a></li>
                    <li><a class="tC" href="#">我的品论(3)</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!--顶部结束--> 
<!--主体内容开始-->

<div class="main cont24  clearfix">
	<div class="main_head pr clearfix">
    	<img class="img_lm" src="../images/teacher_lm.jpg">
        <ul class="infoList">
            <li><span>30</span>作业</li>
            <li><span>300</span>错题</li>
            <li><span>49</span>精品课程</li>
        </ul>
        
        <h2>毛毛虫</h2>
        <p class="signTxt">队伍不好带呀<i>编辑</i></p>
        <p>学　校:北京四中</p>
        <p class="handCls">班　级:101班 班主任&nbsp;&nbsp;&nbsp;201班 数学教师 </p>
        <p>教研组:数学</p>
    </div>
    <div class="mainNav">
        <ul class="mainNav_R clearfix">
            <li> <i class="set"></i><span class="bColor setJs">个人设置<i class="Triangle"></i></span>
                <ul class="tab hide">
                    <li>零食</li>
                    <li>零食</li>
                    <li>零食</li>
                    <li>零食</li>
                </ul>
            </li>
            <li><i class="dressUp"></i><span class="dress_k">装扮空间</span></li>
            <li><i class="management"></i><span>个人管理中心</span></li>
        </ul>
    </div>
    <div class="currentLeft grid_5 push_1">
        <div class="item l_asideMenu">
        	<h4>设置</h4>
            <ul class="setupMenu">
                <li><a class="lisA" href="javascript:;"><i></i>个人设置</a>
                    <ul class="subMenu hide">
                        <li><a href="#">基本信息</a></li>
                        <li><a href="#">头像管理</a></li>
                        <li><a href="#">密码管理</a></li>
                        <li><a href="#">邮箱管理</a></li>
                    </ul>
                </li>
                <li><a class="lisB" href="javascript:;"><i></i>我的档案</a>
                    <ul class="subMenu hide">
                        <li><a href="#">暂无内容(空)</a></li>
                    </ul>
                </li>
                <li><a class="lisC" href="javascript:;"><i></i>消息中心</a>
                    <ul class="subMenu hide">
                        <li><a href="#">我的通知</a></li>
                        <li><a href="#">发短信</a></li>
                        <li><a href="#">我的私信</a></li>
                    </ul>
                </li>
                <li><a class="lisD" href="javascript:;"><i></i>考试试卷和成绩</a>
                    <ul class="subMenu hide">
                        <li><a href="#">考试管理</a></li>
                        <li><a href="#">学期总评</a></li>
                        <li><a href="#">科目总评</a></li>
                    </ul>
                </li>
                <li><a class="lisF" href="javascript:;"><i></i>教研工作</a>
                    <ul class="subMenu hide">
                        <li><a class="ac" href="#">教研课题</a></li>
                        <li><a href="#">教学计划</a></li>
                        <li><a href="#">听课评课</a></li>
                        <li><a href="#">教研组资料</a></li>
                        <li><a href="#">教研日记</a></li>
                    </ul>
                </li>
                <li><a class="lisG" href="javascript:;"><i></i>备课</a>
                    <ul class="subMenu hide">
                        <li><a href="#">个人教学计划</a></li>
                        <li><a href="#">公文包(教案|讲义|经典视频)</a></li>
                    </ul>
                </li>
                <li><a class="lisH" href="javascript:;"><i></i>试卷与作业</a>
                    <ul class="subMenu hide">
                        <li><a href="#">试卷管理</a></li>
                        <li><a href="#">组织测验</a></li>
                        <li><a href="#">作业管理</a></li>
                        <li><a href="#">题目管理</a></li>
                        <li><a href="#">题目推送</a></li>
                    </ul>
                </li>
                <li><a class="lisH" href="javascript:;"><i></i>课程管理</a>
                    <ul class="subMenu hide">
                        <li><a href="#">课程管理</a></li>
                        <li><a href="#">评论管理</a></li>
                        <li><a href="#">课程总结</a></li>
                        <li><a href="#">家长会管理</a></li>
                    </ul>
                </li>
                <li><a class="lisH" href="javascript:;"><i></i>成绩统计表</a>
                    <ul class="subMenu hide">
                        <li><a href="#">暂无内容(空)</a></li>
                    </ul>
                </li>
                <li><a class="lisH" href="javascript:;"><i></i>我的收藏</a>
                    <ul class="subMenu hide">
                        <li><a href="#">收藏的讲义</a></li>
                        <li><a href="#">收藏的课程</a></li>
                    </ul>
                </li>
                <li><a class="lisH" href="javascript:;"><i></i>答疑管理</a>
                    <ul class="subMenu hide">
                        <li><a href="#">暂无内容(空)</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
    <div class="currentRight grid_16 push_2 hear">
        <div class="notice courseManage">
            <div class="noticeH clearfix noticeB">
                <h3 class="h3L">课程总结</h3>
                <div class="new_not fr"> 
                	<em>我的班级：</em>
                    <select class="select_tab">
                        <option value="001">001班</option>
                        <option value="002">002班</option>
                    </select>
                    <em class="sum">总结：</em>
                    <select class="select_tab">
                        <option value="001">我创建的总结</option>
                        <option value="002">我收到的总结</option>
                    </select>
                    <button class="new_examination newSumBtn">新建总结</button>
                </div>
            </div>
            <hr>
            <div class="courseManage_main">
                <ul class="courseManage_List">
                    <li class="clearfix pr">
                        <div>
                            <h4 class="title">一周语文学习综述</h4>
                            <p class="time_release"><em class="startTime">2012-12-20</em> 　至　 <em class="endTime">2012-12-26</em></p>
                            <dl>
                                <dt>知识难点：</dt>
                                <dd class="Qpoint"> <span val="12">标点符号</span><span val="13">造句</span><span val="14">句法</span></dd>
                                <dt>学习氛围：</dt>
                                <dd class="state2">
                                	<span class="state">学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围习氛围学习氛围学习学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围
                                    </span>
                                    <span class="state_more">学习氛围学习asdasdasdasdasdas氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围习氛围学习氛围学习学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围
                                    </span>
                                    <em class="more_sum">[详情]</em>
                                </dd>
                                <dt>学习规划： </dt>
                                <dd class="plan">学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划</dd>
                            </dl>
                            <button type="button" class="btn editBtn">修改</button>
                        </div>
                    </li>
                    <li class="clearfix pr">
                        <div>
                            <h4 class="title">一周语文学习综述</h4>
                            <p class="time_release"><em class="startTime">2012-12-20</em> 　至　 <em class="endTime">2012-12-26</em></p>
                            <dl>
                                <dt>知识难点：</dt>
                                <dd class="Qpoint"> <span val="12">标点符号</span><span val="13">造句</span><span val="14">句法</span></dd>
                                <dt>学习氛围：</dt>
                                <dd class="state">学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围习氛围学习氛围学习学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围</dd>
                                <dt>学习规划： </dt>
                                <dd class="plan">学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划</dd>
                            </dl>
                            <button type="button" class="btn editBtn">修改</button>
                        </div>
                    </li>
                    <li class="clearfix pr">
                        <div>
                            <h4 class="title">一周语文学习综述</h4>
                            <p class="time_release"><em class="startTime">2012-12-20</em> 　至　 <em class="endTime">2012-12-26</em></p>
                            <dl>
                                <dt>知识难点：</dt>
                                <dd class="Qpoint"> <span val="12">标点符号</span><span val="13">造句</span><span val="14">句法</span></dd>
                                <dt>学习氛围：</dt>
                                <dd class="state">学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围习氛围学习氛围学习学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围学习氛围</dd>
                                <dt>学习规划： </dt>
                                <dd class="plan">学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划学习规划</dd>
                            </dl>
                            <button type="button" class="btn editBtn">修改</button>
                        </div>
                    </li>
                </ul>
                <br>
                <div class="page"><a class="jumpBtn">首页</a><a class="jumpBtn">上一页</a><a class="current">1</a><a>2</a><a>3</a><a>4</a><a>5</a><span>……</span><a>9</a><a class="jumpBtn">下一页</a><a class="jumpBtn">末页</a></div>
            </div>
        </div>
    </div>
</div>
<!--主体内容结束-->

<div class="footWrap">
    <div class="foot">
        <dl>
            <dt>关于我们</dt>
            <dd><a href="#">关于班海</a></dd>
            <dd><a href="#">招聘启事</a></dd>
            <dd><a href="#">法律声明</a></dd>
            <dd><a href="#">网站地图</a></dd>
        </dl>
        <dl>
            <dt>商务合作</dt>
            <dd><a href="#">商务合作</a></dd>
            <dd><a href="#">友情链接</a></dd>
            <dd><a href="#">资源合作</a></dd>
            <dd><a href="#">视频合作</a></dd>
        </dl>
        <dl>
            <dt>联系我们</dt>
            <dd><a href="#">在线客服</a></dd>
            <dd><a href="#">官方微博</a></dd>
            <dd><a href="#">意见反馈</a></dd>
            <dd><a href="#">关注微信</a></dd>
        </dl>
        <dl>
            <dt>问题帮助</dt>
            <dd><a href="#">常见问题</a></dd>
            <dd><a href="#">用户答疑</a></dd>
        </dl>
        <p>@ 2014 班海 http://www.banhai.com 北京三海教育科技有限公司 版权所有<br>
            京ICP证080367号 京ICP备08103829号  北京市公安局海淀分局备案号1101081714 </p>
    </div>
</div>

</body>
</html>
